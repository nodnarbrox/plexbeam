# ============================================================================
# PlexBeam â€” Docker Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
# ============================================================================

# --- System ---
PUID=1000
PGID=1000
TZ=America/New_York

# --- Plex ---
# Get a claim token from https://plex.tv/claim (expires in 4 minutes)
PLEX_CLAIM=

# Path to persistent Plex config (database, metadata, etc.)
PLEX_CONFIG_PATH=./config/plex

# Path to your media library (movies, TV shows, music)
MEDIA_PATH=/mnt/media

# --- PlexBeam Cartridge ---
# URL of the remote GPU worker
PLEXBEAM_WORKER_URL=http://localhost:8765

# Shared API key for cartridge <-> worker authentication
PLEXBEAM_API_KEY=change-me-to-a-random-secret

# Shared directory for segment output (optional, for SMB/NFS setups)
PLEXBEAM_SHARED_SEGMENT_DIR=

# Auto-update repo (GitHub URL or local path, "local" to disable)
PLEXBEAM_UPDATE_REPO=local

# Path for cartridge logs on the host
PLEXBEAM_LOG_PATH=./config/plex-cartridge-logs

# --- GPU Worker ---
# Port the worker listens on (host side)
WORKER_PORT=8765

# Hardware acceleration mode: qsv, vaapi, nvenc, none
# Use "none" for software-only transcoding
PLEX_WORKER_HW_ACCEL=qsv

# Max concurrent transcode jobs
WORKER_MAX_JOBS=3

# Path for worker temp files on the host
WORKER_TEMP_PATH=./config/worker-temp

# Path for worker logs on the host
WORKER_LOG_PATH=./config/worker-logs

# --- Linux GPU Passthrough ---
# On Linux with Intel GPU, create docker-compose.override.yml:
#
#   services:
#     worker-intel:
#       devices:
#         - /dev/dri:/dev/dri
#
# This is not needed on Windows (no /dev/dri). On Windows the worker
# starts without GPU passthrough and uses software encoding in Docker.
# For GPU transcoding on Windows, run the worker natively instead:
#   cd worker && python worker.py
